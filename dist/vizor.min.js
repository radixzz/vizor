"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){this.programId=-1};function e(t){console.log(t)}var r,n=function(){function e(e){this.gl=function(t){var e=t.canvas,r=t.version,n=t.options,i=["webgl2","webgl","experimental-webgl"];r<2&&i.shift();for(var o=0;o<i.length;o++){var a=e.getContext(i[o],n);if(a)return a}}({canvas:document.getElementById(e),version:1,options:{}}),this.state=new t,this.dpr=1}var r=e.prototype;return r.resize=function(t,e,r){void 0===r&&(r=!1);var n=this.dpr,i=this.gl,o=i.canvas,a=t*n,s=e*n;o.width===a&&o.height===s||(o.width=a,o.height=s,i.viewport(0,0,a,s),r&&Object.assign(o.style,{width:a+"px",height:s+"px"}))},r.clear=function(){var t=this.gl;t.clearColor(0,0,0,1),t.clear(16384)},r.render=function(t,e){this.gl},e}(),i=Array,o=Int32Array,a=Float32Array,s=((r={})[35670]=["1i",i,1],r[5124]=["1i",o,1],r[5126]=["1f",a,1],r[35671]=["2iv",i,2],r[35672]=["3iv",i,3],r[35673]=["3iv",i,4],r[35667]=["2iv",o,2],r[35668]=["3iv",o,3],r[35669]=["4iv",o,4],r[35664]=["2fv",a,2],r[35665]=["3fv",a,3],r[35666]=["4fv",a,4],r[35674]=["Matrix2fv",a,4],r[35675]=["Matrix3fv",a,9],r[35676]=["Matrix4fv",a,16],r[35678]=["1i",o,1],r);function c(t){var r=s[t];return r||e("Unexpected uniform type"),r}var h={};function u(t,e,r){if(!h[e]){var n=function(t,e){var r=c(t)[0];return e>1&&(r=r.replace(/v?$/,"v")),"uniform"+r}(e,r),i=t[n],o=/Matrix/.test(n);h[e]=function(e,r){o?i.call(t,e,!1,r):i.call(t,e,r)}}return h[e]}function f(t,r,n){var i=t.createShader(r);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,35713)){t.getShaderInfoLog(i);t.deleteShader(i),e("Shader compilation error: ")}return i}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var g=function(){function t(t,e){var r=e.name,n=e.type,i=e.location,o=e.size;this.gl=t,this.type=n,this.name=r,this.location=i,this.size=o,this.setter=u(t,n,o),this.cache=function(t,e){var r=35670!==t&&0,n=c(t),i=n[1],o=n[2];return(e>1||o>1)&&(r=new i(e*o),35670===t&&r.fill(!1)),r}(n,o)}var e,r,n,i=t.prototype;return i.setCache=function(t){t.length?function(t,e){for(var r=0;r<e.length;r++)e[r]=t[r]}(t,this.cache):this.cache=t},i.equals=function(t){var e=this.cache;return t.length?function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(t,e):t===e},e=t,(r=[{key:"value",set:function(t){var e=this.location;this.equals(t)||(this.setter(e,t),this.setCache(t))},get:function(){return this.cache}}])&&l(e.prototype,r),n&&l(e,n),t}(),v=0,m=function(){function t(t,r){var n=r.vertexSource,i=r.fragmentSource;r.uniforms;this.gl=t,this.id=v++,this.program=function(t,r,n){var i=t.createProgram(),o=f(t,35633,r),a=f(t,35632,n);if(t.attachShader(i,o),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,35714)){t.getProgramInfoLog(i);t.deleteProgram(i),t.deleteShader(o),t.deleteShader(a),e("Program link error:")}return i}(t,n,i),this.uniforms=this.createUniforms(),this.attributes=this.createAttributes(),console.log(this.uniforms)}var r=t.prototype;return r.createUniforms=function(){var t=this.gl,e=this.program,r={},n=function(t,e){for(var r=[],n=t.getProgramParameter(e,35718),i=0;i<n;i++){var o=t.getActiveUniform(e,i),a=o.name,s=o.type,c=o.size,h=t.getUniformLocation(e,a);r.push({name:a,type:s,size:c,location:h})}return r}(t,e);return console.log(n),n.forEach((function(e){return r[e.name]=new g(t,e)})),r},r.createAttributes=function(){!function(t,e){for(var r=t.getProgramParameter(e,35721),n=0;n<r;n++){var i=t.getActiveAttrib(e,n);console.log(i)}}(this.gl,this.program)},r.use=function(t){var e=this.gl,r=this.program,n=this.id;t.programId===n||(e.useProgram(r),t.programId=n)},t}();exports.Geometry=function(){},exports.Mesh=function(){},exports.Object3D=function(){this.parent=null,this.children=[]},exports.Renderer=n,exports.Shader=m;
